---
title:    Cloud Hosting
category: Guides
order:    4
---

<span class="label label-gray">Guide</span>
<span class="label label-yellow">Difficulty: Intermediate</span>
&nbsp;<small class="muted">You will need to be comfortable using the command-line.</small>

<hr class="nomargin">

Unlike BitTorrent, Dat Archives are not automatically shared by other users.
Hosting is therefore the responsibility of the archive author. 

For public archives, you should host from a device that's always online.
Cloud computing makes that easy to do.
In this guide, we'll setup a cloud peer which you can push your archives to.

<hr class="nomargin">

### Install Software

**1.** Setup a Linux distribution on a cloud provider. We suggest using [Ubuntu 16 on Digital Ocean](https://www.digitalocean.com/).

**2.** On the cloud computer:

 - Install Node.js 4 or above. ([Guide for Ubuntu](https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-ubuntu-16-04)).
 - Install build dependencies: `sudo apt-get install build-essential libtool`
 - Install [pm2](https://github.com/Unitech/pm2): `sudo npm install -g pm2`
 - Install [dat-publish](https://github.com/joehand/dat-publish): `sudo npm install -g dat-publish`

**3.** On your work computer:

 - Install Node.js 4 or above.
 - Install [dat-push](https://github.com/joehand/dat-push): `npm install -g dat-push`

<hr class="nomargin">

### Test Dat-Publish

The [dat-publish](https://github.com/joehand/dat-publish) tool creates a long-running process which accepts "dat-push" commands.
It is how we'll host our archives.

On the cloud computer, start dat-publish using the following command:

```bash
dat-publish -du
```

You should see output like:

<pre>
dat-archiver listening on 350bf23630038872f7ef5a0ac2c401f6
</pre>

Dat-publish uses a secret key to identify itself in the network.
In my case, the key is `350bf23630038872f7ef5a0ac2c401f6`.
Your key will differ.

<div class="technical-explanation" data-title="Security Tip">
  <div class="icon"><span class="fa fa-info-circle"></span></div>
  <div class="body">
    <p>Anybody with the server key will be able to push new archives to the computer, so be sure to keep it secret.</p>
  </div>
</div>

On your work computer, test that your host is working by pushing a folder.
Create a new temporary directory and run these commands:

```bash
echo "hello, world" > file.txt
dat-push 350bf23630038872f7ef5a0ac2c401f6
```

On your cloud computer, you should see the following:

<pre>
New push connection.
Push started. Key: 97ec2a9992dd45be2d14e2319af7facdb5d291a558ea63191b2465513063c2eb
Finished receiving push. Key: 97ec2a9992dd45be2d14e2319af7facdb5d291a558ea63191b2465513063c2eb
</pre>

Your archive is now hosted, by your cloud computer, on the dat network! 

<hr class="nomargin">

### Daemonize dat-publish

Let's make sure dat-publish stays running.

Close the `dat-publish` process from before.
We will restart it using [pm2](https://github.com/Unitech/pm2), a utility for managing daemons.
The command will look like this, but **dont copy this command just yet**:

```bash
pm2 start dat-publish -- $YOUR_KEY -du
```

You need to replace `$YOUR_KEY`.
Dat-publish will generate a new key on each invocation unless you specify a key yourself.
We want the key to stay the same if the process is restarted.
Copy the key generated by your earlier `dat-publish` invocation, and use it in the `pm2` command above.

If successful, the output of `pm2 log 0` should look like this:

<pre>
0|dat-publ | dat-archiver listening on $YOUR_KEY
</pre>

Finally, run this command and follow its instructions to make sure the daemon is started on system reboot:

```bash
pm2 startup
```

<hr class="nomargin">

### Summary

You now have a cloud peer which can accept new dats, using dat-push.
Just go to the folder you want hosted, and run `dat-push $YOUR_KEY` to put your archive on the peer.
Run the command to push updates to the files.

If you lose your peer's key, you can create a new one by restarting the command and setting a new key.
Be sure to use a long random string, and not something human-guessable.

You can learn more about the commands via their documentation:

 - [dat-publish](https://github.com/joehand/dat-publish)
 - [dat-push](https://github.com/joehand/dat-push)
 - [pm2](https://github.com/Unitech/pm2)

<hr class="nomargin">

#### See also

<a class="btn btn-block" href="/docs/cli.html"><i class="fa fa-terminal" aria-hidden="true"></i> Command Line Tools</a>
<a class="btn btn-block" href="/docs/guides/create-a-website.html"><i class="fa fa-file-code-o" aria-hidden="true"></i> Create a Website</a>
<a class="btn btn-block" href="/docs/guides/share-files.html"><i class="fa fa-share-alt" aria-hidden="true"></i> Share Files</a>