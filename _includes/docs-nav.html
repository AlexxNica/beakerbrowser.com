<nav class="doc__nav">
  <div class="doc-nav-inner">
    {% assign doc_groups = site.docs | group_by: 'category' | sort: 'name' %}
    {% for doc_group in doc_groups %}
    <ul class="doc__nav-section">
      {% assign docs = doc_group.items | sort: 'order' %}
      {% assign hasTitled = false %}
      {% for doc in docs %}
        {% assign extension = doc.url | slice: -5, 5 %}
        {% if extension == '.html' %}
        {% if hasTitled == false %}
        <span class="doc__group-name">{{ doc_group.name }}</span>
          {% assign hasTitled = true %}
        {% endif %}
        <li class="doc__link {% if doc.url == page.url %}current{%endif %}">
          <a href="{{ doc.url | prepend: site.baseurl }}">
            {{ doc.short_title | default: doc.title | escape }}
          </a>
        </li>
        {% endif %}
      {% endfor %}
    </ul>
    {% endfor %}
  </div>
</nav>
